<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>~/code/node-fake/Readme.md.html</title>
<meta name="Generator" content="Vim/7.3">
<meta name="plugin-version" content="vim7.3_v6">
<meta name="syntax" content="markdown">
<meta name="settings" content="use_css">
<style type="text/css">
<!--
pre { font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
.Title { color: #ff00ff; font-weight: bold; }
.Special { color: #0000aa; font-weight: bold; }
.htmlBold { font-weight: bold; }
-->
</style>
</head>
<body>
<pre>
<span class="htmlBold">**Current Status:**</span> This library is ready for experimental usage.

<span class="Special">#</span><span class="Title"> Fake</span>

Test one thing at a time, fake the rest.

<span class="Special">##</span><span class="Title"> Tutorial</span>

Set an expectation of a method call on an object:

<span class="Special">``</span>` javascript
var fake = require('fake')();
var object = {};

fake.expect(object, 'method');

object.method();
<span class="Special">```</span>

If the last <span class="Special">`</span>object.method()<span class="Special">`</span> call is not present, an exception will be thrown.

Depending on your [approach to TDD][mocksvsstubs], you may prefer to use
stubbing over mocking instead:

[mocksvsstubs]: <a href="http://martinfowler.com/articles/mocksArentStubs.html">http://martinfowler.com/articles/mocksArentStubs.html</a>

<span class="Special">``` </span>javascript
var fake = require('fake')();
var object = {};

var objectMethodCall = fake.stub(object, 'method');

object.method();

assert.equals(objectMethodCall.calls.length, 1);
<span class="Special">```</span>

<span class="Special">##</span><span class="Title"> API</span>

<span class="Special">###</span><span class="Title"> fake.expect(object, method, [times, withArgs, andReturn | andHandle])</span>

Set up an ordered expectation. Calling any other methods controlled by fake
before this expectation has been satisifed will throw an exception.

<span class="Special">###</span><span class="Title"> fake.expectAnytime(object, method, [times, withArgs, andReturn | andHandle])</span>

Set up an unordered expectation. This will only throw an error if this
expectation is not verified before the process exits.

<span class="Special">###</span><span class="Title"> fake.stub(object, method, [times, withArgs, andReturn | andHandle])</span>

Set up an optional expectation. This is useful for pre-filling return values
for functions, without caring if the function is ever called.

<span class="Special">##</span><span class="Title"> Todo</span>

* Report non-matching anytime expectations if they are the closest match
* Maybe rename the module to fake?
* Move stacktrace into own module
* Useful error reporting
* Partial arguments matching
* Become self-testing
* Documentation
* Handle fake functions being claimed by multiple fakes
* NodeModuleScene / BrowserScriptScene?
</pre>
</body>
</html>
